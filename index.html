<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mazer Bio</title>
    <style>
        * {
            user-select: none !important;
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
            -webkit-user-drag: none !important;
            -webkit-tap-highlight-color: transparent;
        }
        :root {
            --bg-body: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.6);
            --accent-primary: #00d2ff;
            --accent-secondary: #9d50bb;
            --glass-bg: rgba(15, 20, 35, 0.4);
            --glass-border: rgba(255, 255, 255, 0.1);
            --sidebar-bg: rgba(2, 2, 5, 0.4);
            --card-bg: rgba(15, 20, 35, 0.4);
            --player-bg: rgba(15, 20, 35, 0.85);
            --input-bg: rgba(255, 255, 255, 0.05);
            --btn-hover-bg: rgba(0, 210, 255, 0.1);
            --particle-color: white;
            --shadow-color: rgba(0, 0, 0, 0.5);
        }
        body.theme-light {
            --bg-body: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
            --text-main: #2c3e50;
            --text-muted: rgba(44, 62, 80, 0.7);
            --accent-primary: #3b82f6;
            --accent-secondary: #60a5fa;
            --glass-bg: rgba(255, 255, 255, 0.6);
            --glass-border: rgba(0, 0, 0, 0.1);
            --sidebar-bg: rgba(255, 255, 255, 0.8);
            --card-bg: rgba(255, 255, 255, 0.6);
            --player-bg: rgba(255, 255, 255, 0.9);
            --input-bg: rgba(0, 0, 0, 0.05);
            --btn-hover-bg: rgba(41, 128, 185, 0.1);
            --particle-color: #2c3e50;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }
        body.theme-midnight {
            --bg-body: #000000;
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.6);
            --accent-primary: #ffffff;
            --accent-secondary: #808080;
            --glass-bg: rgba(30, 30, 30, 0.6);
            --glass-border: rgba(255, 255, 255, 0.15);
            --sidebar-bg: #000000;
            --card-bg: #000000;
            --player-bg: #111111;
            --input-bg: #222222;
            --btn-hover-bg: rgba(255, 255, 255, 0.1);
            --particle-color: #ffffff;
        }
        body.theme-forest {
            --bg-body: linear-gradient(to bottom right, #0f2027, #203a43, #2c5364);
            --text-main: #f0fdf4;
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent-primary: #4ade80;
            --accent-secondary: #22c55e;
            --glass-bg: rgba(10, 40, 30, 0.5);
            --glass-border: rgba(255, 255, 255, 0.15);
            --sidebar-bg: rgba(5, 20, 15, 0.6);
            --card-bg: rgba(10, 40, 30, 0.5);
            --player-bg: rgba(10, 40, 30, 0.9);
            --input-bg: rgba(255, 255, 255, 0.1);
            --btn-hover-bg: rgba(251, 191, 36, 0.1);
            --particle-color: #4ade80;
        }
        body.theme-sunset {
            --bg-body: linear-gradient(to bottom, #2b102f, #5e2d45, #914253);
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent-primary: #ff8a8a;
            --accent-secondary: #5e3a75;
            --glass-bg: rgba(43, 16, 47, 0.6);
            --glass-border: rgba(255, 138, 138, 0.2);
            --sidebar-bg: rgba(30, 10, 30, 0.8);
            --card-bg: rgba(43, 16, 47, 0.6);
            --player-bg: rgba(43, 16, 47, 0.9);
            --input-bg: rgba(255, 255, 255, 0.05);
            --btn-hover-bg: rgba(255, 138, 138, 0.15);
            --particle-color: #ff8a8a;
        }
        body.theme-ocean {
            --bg-body: linear-gradient(to bottom, #000428, #004e92);
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent-primary: #00d2ff;
            --accent-secondary: #004e92;
            --glass-bg: rgba(0, 4, 40, 0.6);
            --glass-border: rgba(0, 210, 255, 0.2);
            --sidebar-bg: rgba(0, 4, 40, 0.8);
            --card-bg: rgba(0, 4, 40, 0.6);
            --player-bg: rgba(0, 4, 40, 0.9);
            --input-bg: rgba(255, 255, 255, 0.05);
            --btn-hover-bg: rgba(0, 210, 255, 0.15);
            --particle-color: #00d2ff;
            --shadow-color: rgba(0, 0, 0, 0.5);
        }
        body.theme-matrix {
            --bg-body: #000000;
            --text-main: #00ff00;
            --text-muted: rgba(0, 255, 0, 0.6);
            --accent-primary: #00ff00;
            --accent-secondary: #003300;
            --glass-bg: rgba(0, 20, 0, 0.8);
            --glass-border: rgba(0, 255, 0, 0.3);
            --sidebar-bg: #000000;
            --card-bg: rgba(0, 10, 0, 0.8);
            --player-bg: #001100;
            --input-bg: rgba(0, 50, 0, 0.3);
            --btn-hover-bg: rgba(0, 255, 0, 0.1);
            --particle-color: #00ff00;
        }
        body.theme-nebula {
            --bg-body: linear-gradient(to bottom, #2b1055, #7597de);
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent-primary: #d961d6;
            --accent-secondary: #7597de;
            --glass-bg: rgba(43, 16, 85, 0.5);
            --glass-border: rgba(255, 255, 255, 0.15);
            --sidebar-bg: rgba(30, 10, 60, 0.6);
            --card-bg: rgba(43, 16, 85, 0.5);
            --player-bg: rgba(43, 16, 85, 0.9);
            --input-bg: rgba(255, 255, 255, 0.1);
            --btn-hover-bg: rgba(217, 97, 214, 0.15);
            --particle-color: #ffffff;
        }
        body.theme-gold {
            --bg-body: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
            --text-main: #ffd700;
            --text-muted: rgba(255, 215, 0, 0.6);
            --accent-primary: #ffd700;
            --accent-secondary: #b8860b;
            --glass-bg: rgba(20, 20, 20, 0.8);
            --glass-border: rgba(255, 215, 0, 0.3);
            --sidebar-bg: #000000;
            --card-bg: rgba(20, 20, 20, 0.8);
            --player-bg: #111111;
            --input-bg: rgba(255, 215, 0, 0.05);
            --btn-hover-bg: rgba(255, 215, 0, 0.1);
            --particle-color: #ffd700;
        }
        body.theme-dracula {
            --bg-body: #282a36;
            --text-main: #f8f8f2;
            --text-muted: #6272a4;
            --accent-primary: #ff79c6;
            --accent-secondary: #bd93f9;
            --glass-bg: rgba(40, 42, 54, 0.8);
            --glass-border: rgba(189, 147, 249, 0.3);
            --sidebar-bg: #282a36;
            --card-bg: rgba(40, 42, 54, 0.8);
            --player-bg: #282a36;
            --input-bg: rgba(255, 255, 255, 0.05);
            --btn-hover-bg: rgba(255, 121, 198, 0.1);
            --particle-color: #bd93f9;
        }
        input, textarea {
            user-select: text !important;
            -webkit-user-select: text !important;
            -moz-user-select: text !important;
            -ms-user-select: text !important;
        }
        body {
            margin: 0;
            padding: 0;
            display: flex;
             justify-content: center;
            align-items: center;
            min-height: 100vh; min-height: 100dvh;
            background: var(--bg-body);
            font-family: 'Segoe UI', sans-serif;
            color: var(--text-main);
            overflow-x: hidden;
            overscroll-behavior: none;
        }
        #stars-container, #snow-container, #particle-container {
            position: fixed;

            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }
        #particle-container { z-index: 9999; }
        #cursor {
            position: fixed;
            width: 24px;
            height: 24px;
            pointer-events: none;
            z-index: 20000;
            left: 0;
            top: 0;
            transform: translate3d(-5px, -5px, 0);
            filter: drop-shadow(0 0 5px var(--accent-primary));
            opacity: 0;
            transition: opacity 0.2s ease;
            will-change: transform;
        }
        #cursor svg path {
            fill: var(--accent-primary);
            stroke: var(--text-main);
        }
        .menu-btn {
            position: absolute;
            top: 25px;
            left: 25px;
            width: 30px;
            height: 22px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            pointer-events: auto;
            z-index: 15001;
            transition: 0.3s;
        }
        @keyframes burgerPulse {
            0% { box-shadow: 0 0 6px rgba(0, 210, 255, 0.5); }
            50% { box-shadow: 0 0 14px rgba(0, 210, 255, 0.8), 0 0 8px rgba(157, 80, 187, 0.6); }
            100% { box-shadow: 0 0 6px rgba(0, 210, 255, 0.5); }
        }
        .menu-btn span {
            display: block;
            width: 100%;
            height: 2px;
            background: var(--accent-primary);
            border-radius: 2px;
            transition: 0.4s cubic-bezier(0.68, -0.6, 0.32, 1.6);
            box-shadow: 0 0 8px var(--accent-primary);
            animation: burgerPulse 2s infinite;
        }
        .menu-btn:hover span {
            background: #fff;
            box-shadow: 0 0 10px var(--accent-primary), 0 0 20px var(--accent-secondary);
            animation: none;
        }
        .menu-btn.active span:nth-child(1) { transform: translateY(10px) rotate(45deg); }
        .menu-btn.active span:nth-child(2) { opacity: 0; transform: translateX(-20px); }
        .menu-btn.active span:nth-child(3) { transform: translateY(-10px) rotate(-45deg); }
        .sidebar {
            position: fixed;
            top: 0;
            left: -240px;
            width: 233px;
            height: 100%;
            background: var(--sidebar-bg);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            z-index: 15000;
            transition: 0.6s cubic-bezier(0.85, 0, 0.15, 1);
            display: flex;
            flex-direction: column;
            padding: 100px 20px;
            box-sizing: border-box;
            gap: 20px;
            border-right: 1px solid var(--glass-border);
            box-shadow: 10px 0 40px var(--shadow-color);
        }
        .sidebar.active { left: 0; }
        .sidebar .link-btn {
            background: transparent; border: none; border-left: 2px solid var(--glass-border);
            border-radius: 0; text-align: left; padding-left: 20px; font-size: 1.1rem;
            transition: 0.3s; color: var(--text-muted);
        }
        .sidebar .link-btn:hover {
            border-left-color: var(--accent-primary); background: var(--btn-hover-bg);
            padding-left: 30px; box-shadow: none; color: var(--text-main); text-shadow: 0 0 10px var(--accent-primary);
        }
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 50px 40px;
            border-radius: 30px;
            text-align: center;
            width: 100%; max-width: 360px;
            min-height: 500px;
            z-index: 1;
            position: relative;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            border: 1px solid var(--glass-border);
            box-shadow: 0 20px 50px var(--shadow-color);
        }
        .card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-primary);
            box-shadow: 0 20px 60px var(--shadow-color), 0 0 20px var(--accent-primary);
        }
        .content-section { display: none; animation: fadeIn 0.5s ease-out; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        .avatar {
            width: 160px; height: 160px; border-radius: 50%; object-fit: cover;
            border: 2px solid var(--accent-primary); box-shadow: 0 0 30px var(--accent-primary);
            margin-bottom: 30px; pointer-events: auto;
            -webkit-user-drag: none;
        }
        .greeting { font-size: 1.1rem; color: var(--text-muted); margin-bottom: -5px; font-weight: 500; }
        h1 { font-size: 3.5rem; margin: 10px 0; color: var(--accent-primary); font-weight: 800; letter-spacing: -1px; }
        .status-text { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 40px; letter-spacing: 4px; text-transform: uppercase; min-height: 19px; transition: opacity 0.5s ease; opacity: 1; }
        .link-btn {
            text-decoration: none; color: var(--text-muted); padding: 16px;
            background: var(--input-bg); border-radius: 12px; transition: 0.3s;
            border: 1px solid var(--glass-border); font-weight: 600; text-transform: uppercase;
            letter-spacing: 1.5px; font-size: 0.75rem; display: block; margin-bottom: 5px; pointer-events: auto;
        }
        .link-btn:hover { background: var(--btn-hover-bg); color: var(--accent-primary); border-color: var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); }
        .snow, .click-snow { position: absolute; color: var(--particle-color); user-select: none; pointer-events: none; will-change: transform; }
        @keyframes starFade { from { opacity: 0.2; } to { opacity: 0.8; } }
        @keyframes fall {
            from { transform: translate3d(0, -10vh, 0) rotate(0deg); }
            to { transform: translate3d(0, 110vh, 0) rotate(360deg); }
        }
        .project-list { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        .project-item {
            background: var(--input-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px; padding: 20px; text-align: center; transition: 0.3s;
            position: relative; min-height: 160px; display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .project-item:hover {
            transform: translateY(-5px);
            background: var(--btn-hover-bg);
            border-color: var(--accent-primary);
            box-shadow: 0 0 25px var(--accent-primary);
        }
        .project-title { color: var(--accent-primary); font-weight: 800; font-size: 1.4rem; margin-bottom: 5px; letter-spacing: 1px; }
        .project-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 15px; line-height: 1.4; max-width: 95%; }
        .project-link-small {
            display: inline-block; font-size: 0.75rem; color: var(--text-main); text-decoration: none;
            background: var(--input-bg); padding: 10px 25px; text-align: center;
            border: 1px solid var(--glass-border); border-radius: 8px;
            text-transform: uppercase; letter-spacing: 2px; font-weight: 600; transition: 0.3s; pointer-events: auto;
        }
        .project-link-small:hover { background: var(--btn-hover-bg); color: var(--accent-primary); border-color: var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); }
        .modal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); z-index: 5000;
            display: none; justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal.active { display: flex; animation: fadeIn 0.3s; }
        .modal img { max-width: 80%; max-height: 80%; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.5); pointer-events: auto; transform: scale(3); -webkit-user-drag: none; }
        #riddle-modal { z-index: 5001; }
        .password-box {
            background: var(--player-bg); backdrop-filter: blur(20px); padding: 40px;
            border-radius: 20px; border: 1px solid var(--accent-primary);
            box-shadow: 0 0 40px var(--shadow-color); text-align: center;
            display: flex; flex-direction: column; gap: 20px; transform: scale(1.1); pointer-events: auto;
        }
        .password-box h3 { margin: 0; color: var(--accent-primary); letter-spacing: 2px; font-size: 1.5rem; }
        .password-box input {
            background: var(--input-bg); border: 1px solid var(--glass-border);
            padding: 12px; border-radius: 10px; color: var(--text-main); outline: none; text-align: center;
            font-size: 1.1rem; transition: 0.3s; pointer-events: auto;
        }
        .password-box input:focus { border-color: var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); }
        .password-box button {
            background: linear-gradient(45deg, var(--accent-primary), var(--accent-secondary)); border: none; padding: 12px;
            border-radius: 10px; color: white; font-size: 1.5rem; cursor: pointer; transition: 0.3s; pointer-events: auto;
        }
        .password-box button:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--accent-primary); }

        .info-box {
            background: var(--player-bg);
            backdrop-filter: blur(20px);
            padding: 30px;
            padding-top: 50px;
            border-radius: 20px;
            border: 1px solid var(--accent-primary);
            box-shadow: 0 0 40px var(--shadow-color);
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 25px;
            transform: scale(1.1);
            pointer-events: auto;
            position: relative;
            width: 90%;
            max-width: 320px;
        }
        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 2rem;
            line-height: 1;
            cursor: pointer;
            transition: 0.3s;
            padding: 5px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close-btn:hover {
            color: var(--accent-primary);
            transform: rotate(90deg);
        }
        .info-id {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-main);
            letter-spacing: 2px;
            font-family: 'Courier New', Courier, monospace;
            padding: 20px;
            background: var(--input-bg);
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            word-break: break-all;
        }
        .info-copy-btn {
            background: linear-gradient(45deg, var(--accent-primary), var(--accent-secondary));
            border: none;
            padding: 12px;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: 0.3s;
            pointer-events: auto;
        }
        .info-copy-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--accent-primary);
        }
        .snake-btn {
            position: fixed; bottom: 25px; left: 25px;
            width: 40px; height: 40px;
            background: var(--input-bg); border: 1px solid var(--glass-border);
            border-radius: 10px; color: var(--text-main);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 2100; transition: 0.3s; pointer-events: auto;
        }
        .snake-btn:hover { background: var(--btn-hover-bg); border-color: var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); }
        .game-box {
            background: var(--player-bg);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 20px;

            border: 1px solid var(--accent-primary);
            box-shadow: 0 0 40px var(--shadow-color);
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 15px;
            transform: scale(1.1);
            pointer-events: auto;
            position: relative;
        }

        #snake-canvas {
            background: var(--input-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            box-shadow: 0 0 15px var(--shadow-color);
            touch-action: none;
            max-width: 100%; height: auto;
            color: var(--text-main);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.3s; pointer-events: auto;
        }
        .paint-btn {
            position: fixed; bottom: 25px; left: 80px;
            width: 40px; height: 40px;
            background: var(--input-bg); border: 1px solid var(--glass-border);
            border-radius: 10px; color: var(--text-main);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 2100; transition: 0.3s; pointer-events: auto;
        }
        .paint-btn:hover { background: var(--btn-hover-bg); border-color: var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); }
        .paint-btn svg { width: 24px; height: 24px; fill: var(--text-main); transition: 0.3s; }
        .paint-btn:hover svg { fill: var(--accent-primary); }
        
        .paint-box {
            background: var(--player-bg); backdrop-filter: blur(20px); padding: 20px;
            border-radius: 20px; border: 1px solid var(--accent-primary);
            box-shadow: 0 0 40px var(--shadow-color); text-align: center;
            display: flex; flex-direction: column; gap: 15px; transform: scale(1.1);

            pointer-events: auto; position: relative; max-width: 95vw;
        }
        .paint-controls {
            display: flex; gap: 10px; justify-content: center; align-items: center; flex-wrap: wrap;
        }
        #paint-canvas {
            background: var(--input-bg); border: 1px solid var(--glass-border);
            border-radius: 10px; box-shadow: 0 0 15px var(--shadow-color);
            touch-action: none; cursor: crosshair;
            cursor: pointer;
        }

        .skills-container { display: flex; flex-direction: column; gap: 25px; width: 100%; padding: 10px 0; }
        .skill-item { width: 100%; }
        .skill-info { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.9rem; color: var(--text-muted); font-weight: 600; letter-spacing: 1px; }
        .progress-bar { width: 100%; height: 6px; background: var(--input-bg); border-radius: 10px; overflow: hidden; position: relative; border: 1px solid var(--glass-border); }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); width: 0; border-radius: 10px; transition: width 1s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 15px var(--accent-primary); position: relative; }
        .progress-fill::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent); transform: translateX(-100%); animation: shimmer 2s infinite; }
        @keyframes shimmer { 100% { transform: translateX(100%); } }

        .game-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
            transition: 0.4s ease;
            display: flex; flex-direction: column; align-items: center;
        }
        .game-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--accent-primary);
            box-shadow: 0 10px 30px var(--shadow-color), 0 0 20px var(--accent-primary);
        }
        .game-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent-primary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .game-desc {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 20px;
            line-height: 1.6;
            max-width: 90%;
        }
        .download-btn {
            display: inline-block; padding: 12px 30px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            color: #fff; text-decoration: none; border-radius: 50px;
            font-weight: bold; text-transform: uppercase; letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.3s; pointer-events: auto;
        }
        .download-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--accent-primary); }

        .audio-player-toggle {
            position: fixed;
            bottom: 25px;
            right: 25px;
            width: 50px;
            height: 50px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2100;
            transition: 0.3s;
            box-shadow: 0 5px 15px var(--shadow-color);
            pointer-events: auto;
        }
        .audio-player-toggle:hover {
            transform: scale(1.1);
            border-color: var(--accent-primary);
            box-shadow: 0 0 20px var(--accent-primary);
        }
        .audio-player-toggle svg { width: 24px; height: 24px; fill: var(--accent-primary); transition: 0.3s; }
        .audio-player-container {
            position: fixed;
            bottom: 90px;
            right: 25px;
            width: 320px;
            background: var(--player-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            padding: 25px;
            z-index: 2099;
            box-shadow: 0 15px 40px var(--shadow-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
        }
        .audio-player-container.active { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
        .audio-controls { display: flex; align-items: center; gap: 15px; }
        .audio-controls button { background: var(--input-bg); border: 1px solid var(--glass-border); border-radius: 8px; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; transition: 0.3s; pointer-events: auto; }
        .audio-controls { justify-content: center; width: 100%; }
        .audio-controls button:hover { background: var(--btn-hover-bg); border-color: var(--accent-primary); }
        .audio-controls button.active { background: var(--btn-hover-bg); box-shadow: 0 0 10px var(--accent-primary); }
        .audio-controls button svg { width: 18px; height: 18px; fill: var(--text-muted); }
        .audio-controls button:hover svg, .audio-controls button.active svg { fill: var(--accent-primary); }
        #play-pause-btn { width: 50px; height: 50px; border-radius: 50%; }
        #play-pause-btn svg { width: 22px; height: 22px; }
        .progress-wrapper { width: 100%; display: flex; align-items: center; gap: 10px; }
        .time-display { font-size: 0.75rem; color: var(--text-muted); min-width: 35px; text-align: center; }
        .progress-bar-container { width: 100%; height: 20px; background: transparent; cursor: pointer; position: relative; display: flex; align-items: center; }
        .progress-bar-container::before { content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 100%; height: 6px; background: var(--glass-border); border-radius: 3px; }
        .progress-bar-fill { height: 6px; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 3px; width: 0%; position: relative; z-index: 1; pointer-events: none; box-shadow: 0 0 10px var(--accent-primary); }
        .progress-bar-fill::after { content: ''; position: absolute; right: -6px; top: 50%; transform: translateY(-50%); width: 12px; height: 12px; background: white; border-radius: 50%; opacity: 0; transition: opacity 0.2s; }
        .progress-bar-container:hover .progress-bar-fill::after { opacity: 1; }
        .volume-control { position: relative; }
        .volume-popup {
            position: absolute;
            bottom: 60px;
            left: 50%;
            background: rgba(30, 40, 60, 0.7);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 10px 0;
            width: 30px;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: all 0.3s;
            pointer-events: none;
            transform-origin: bottom center;
            transform: translateX(-50%) scale(0.9);
        }
        .volume-popup.active { opacity: 1; transform: translateX(-50%) scale(1); pointer-events: auto; }
        .volume-slider { -webkit-appearance: none; appearance: none; background: transparent; width: 100px; height: 30px; transform: rotate(-90deg); cursor: pointer; }
        .volume-slider::-webkit-slider-runnable-track { width: 100%; height: 4px; background: var(--glass-border); border-radius: 2px; }
        .volume-slider::-webkit-slider-thumb { -webkit-appearance: none; height: 14px; width: 14px; background: var(--accent-primary); border-radius: 50%; margin-top: -5px; box-shadow: 0 0 10px var(--accent-primary); }
        .volume-slider::-moz-range-track { width: 100%; height: 4px; background: var(--glass-border); border-radius: 2px; }
        .volume-slider::-moz-range-thumb { height: 14px; width: 14px; background: var(--accent-primary); border-radius: 50%; border: none; box-shadow: 0 0 10px var(--accent-primary); }
        .track-title {
            font-size: 1.2rem; font-weight: 700; color: var(--text-main); text-align: center; margin-bottom: 5px; text-shadow: 0 0 15px var(--accent-primary);
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .lang-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 40px;
            height: 40px;
            background: var(--input-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-main);
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; cursor: pointer; z-index: 2100; transition: 0.3s;
            font-size: 0.9rem; pointer-events: auto;
        }
        .lang-btn:hover { background: var(--btn-hover-bg); border-color: var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); }
        .lang-dropdown {
            position: absolute; top: 75px; right: 25px;
            background: var(--player-bg); backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: 12px;
            padding: 8px; display: flex; flex-direction: column; gap: 5px;
            opacity: 0; pointer-events: none; transform: translateY(-10px);
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2101;
            min-width: 140px; box-shadow: 0 10px 30px var(--shadow-color);
        }
        .lang-dropdown.active { opacity: 1; pointer-events: auto; transform: translateY(0); }
        .lang-option {
            padding: 12px 15px; color: var(--text-muted); cursor: pointer; border-radius: 8px; transition: 0.2s; font-size: 0.9rem; font-weight: 500; display: flex; align-items: center; gap: 10px;
        }
        .lang-option:hover { background: var(--input-bg); color: var(--text-main); }
        .lang-option.selected { background: var(--btn-hover-bg); color: var(--accent-primary); }
        
        .theme-btn {
            position: absolute; top: 25px; right: 80px;
            width: 40px; height: 40px;
            background: var(--input-bg); border: 1px solid var(--glass-border);
            border-radius: 10px; color: var(--text-main);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 2100; transition: 0.3s; pointer-events: auto;
        }
        .theme-btn:hover { background: var(--btn-hover-bg); border-color: var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); }
        .theme-btn svg { width: 20px; height: 20px; fill: var(--text-main); transition: 0.3s; }
        .theme-btn:hover svg { fill: var(--accent-primary); }
        .theme-dropdown {
            position: absolute; top: 75px; right: 80px;
            background: var(--player-bg); backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: 12px;
            padding: 8px; display: flex; flex-direction: column; gap: 5px;
            opacity: 0; pointer-events: none; transform: translateY(-10px);
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2101;
            min-width: 140px; box-shadow: 0 10px 30px var(--shadow-color);
            max-height: 240px; overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-primary) transparent;
        }
        .theme-dropdown::-webkit-scrollbar { width: 4px; }
        .theme-dropdown::-webkit-scrollbar-track { background: transparent; }
        .theme-dropdown::-webkit-scrollbar-thumb {
            background: var(--accent-primary); border-radius: 4px;
        }
        .theme-dropdown.active { opacity: 1; pointer-events: auto; transform: translateY(0); }
        .theme-option {
            padding: 12px 15px; color: var(--text-muted); cursor: pointer; border-radius: 8px; transition: 0.2s; font-size: 0.9rem; font-weight: 500;
        }
        .theme-option:hover { background: var(--input-bg); color: var(--text-main); }
        .theme-option.selected { background: var(--btn-hover-bg); color: var(--accent-primary); }

        #transition-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #090a0f; z-index: 99999;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
        }
        #transition-overlay.active { opacity: 1; pointer-events: auto; }

        #toast-notification {
            position: fixed;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--player-bg);
            border: 1px solid var(--accent-primary);
            color: var(--text-main);
            padding: 12px 25px;
            border-radius: 12px;
            z-index: 10001;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            box-shadow: 0 10px 30px var(--shadow-color);
            backdrop-filter: blur(15px);
            font-weight: 600;
            pointer-events: none;
            white-space: nowrap;
        }
        #toast-notification.show {
            top: 30px;
            opacity: 1;
        }

        @media (max-width: 768px) {
            #cursor { display: none; }
            body { overflow-y: auto; display: block; }
            * { cursor: auto !important; }
            .card { margin: 80px 20px 120px 20px; min-height: auto; padding: 40px 20px; }
            h1 { font-size: 2.8rem; }
            .sidebar { width: 260px; left: -270px; }
            .sidebar.active { left: 0; }
            .modal img { transform: scale(1.2); }
            .password-box { transform: scale(1); width: 85%; padding: 25px; }

            .audio-player-container { width: auto; left: 20px; right: 20px; bottom: 85px; }
        }
        @media (min-width: 769px) {
            * { cursor: none !important; }
        }
    </style>
</head>

<body>
    <div id="stars-container"></div>
    <div id="snow-container"></div>
    <div id="particle-container"></div>
    <div id="transition-overlay"></div>
    <div id="toast-notification"></div>
    <div class="lang-btn" id="lang-btn">EN</div>
    <div class="lang-dropdown" id="lang-dropdown">
        <div class="lang-option" data-lang="en">English</div>
        <div class="lang-option" data-lang="ru">Русский</div>
        <div class="lang-option" data-lang="es">Español</div>
        <div class="lang-option" data-lang="fr">Français</div>
        <div class="lang-option" data-lang="de">Deutsch</div>
    </div>
    <div class="theme-btn" id="theme-btn">
        <svg viewBox="0 0 24 24"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg>
    </div>
    <div class="theme-dropdown" id="theme-dropdown">
        <div class="theme-option" data-theme="default">Cyberpunk</div>
        <div class="theme-option" data-theme="light">Light</div>
        <div class="theme-option" data-theme="midnight">Midnight</div>
        <div class="theme-option" data-theme="forest">Forest</div>
        <div class="theme-option" data-theme="sunset">Sunset</div>
        <div class="theme-option" data-theme="ocean">Ocean</div>
        <div class="theme-option" data-theme="matrix">Matrix</div>
        <div class="theme-option" data-theme="nebula">Nebula</div>
        <div class="theme-option" data-theme="gold">Gold</div>
        <div class="theme-option" data-theme="dracula">Dracula</div>
    </div>
    <div class="snake-btn" id="snake-game-btn">
        <svg viewBox="0 0 24 24"><path d="M19,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M13.2,15.5C13.2,16.3 12.5,17 11.7,17H9.7C8.9,17 8.2,16.3 8.2,15.5V14C8.2,13.2 8.9,12.5 9.7,12.5H10.2V11H9.7C8.9,11 8.2,10.3 8.2,9.5V8C8.2,7.2 8.9,6.5 9.7,6.5H11.7C12.5,6.5 13.2,7.2 13.2,8V9.5C13.2,10.3 12.5,11 11.7,11H11.2V12.5H11.7C12.5,12.5 13.2,13.2 13.2,14V15.5Z"/></svg>
    </div>
    <div class="paint-btn" id="paint-btn">
        <svg viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/></svg>
    </div>
    <div class="card">
        <div id="bio" class="content-section active">
            <img src="me.png" alt="Avatar" class="avatar" draggable="false">
            <div class="greeting" id="greeting"></div>
            <h1>Mazer</h1>
            <div class="status-text" id="typewriter"></div>
            <a href="#" id="telegram-btn" class="link-btn">Telegram</a>
            <!-- <a href="https://www.youtube.com/@MazerOxide" target="_blank" rel="noopener noreferrer" class="link-btn">Youtube</a> -->
            <a href="#" id="oxide-id-btn" class="link-btn">Oxide HH-ID</a>
        </div>
        <div id="projects" class="content-section">
            <h1 style="font-size: 2.5rem; margin-bottom: 20px;">Works</h1>
            <!--
            <div class="project-list">
                <div class="project-item">
                    <div class="project-title">PROJECT 1</div>
                    <div class="project-desc">Краткое описание первого проекта.</div>
                    <a href="#" class="project-link-small">Visit</a>
                </div>
                <div class="project-item">
                    <div class="project-title">PROJECT 2</div>
                    <div class="project-desc">Краткое описание второго проекта.</div>
                    <a href="#" class="project-link-small">Visit</a>
                </div>
                <div class="project-item">
                    <div class="project-title">PROJECT 3</div>
                    <div class="project-desc">Краткое описание третьего проекта.</div>
                    <a href="#" class="project-link-small">Visit</a>
                </div>
            </div>
            -->
            <div style="padding: 50px; text-align: center; opacity: 0.5;">
                <h3 class="soon-text" id="soon-trigger" style="margin: 0; letter-spacing: 5px; text-transform: uppercase; font-size: 1.5rem; pointer-events: auto;">Soon...</h3>
            </div>
        </div>
        <div id="skills" class="content-section">
            <h1 style="font-size: 2.5rem; margin-bottom: 30px;">Skills</h1>
            <!--
            <div class="skills-container">
                <div class="skill-item">
                    <div class="skill-info"><span>HTML5</span><span>95%</span></div>
                    <div class="progress-bar"><div class="progress-fill" data-width="95%"></div></div>
                </div>
                <div class="skill-item">
                    <div class="skill-info"><span>CSS3 / SCSS</span><span>90%</span></div>
                    <div class="progress-bar"><div class="progress-fill" data-width="90%"></div></div>
                </div>
                <div class="skill-item">
                    <div class="skill-info"><span>JavaScript</span><span>85%</span></div>
                    <div class="progress-bar"><div class="progress-fill" data-width="85%"></div></div>
                </div>
                <div class="skill-item">
                    <div class="skill-info"><span>Python</span><span>70%</span></div>
                    <div class="progress-bar"><div class="progress-fill" data-width="70%"></div></div>
                </div>
                <div class="skill-item">
                    <div class="skill-info"><span>Design</span><span>80%</span></div>
                    <div class="progress-bar"><div class="progress-fill" data-width="80%"></div></div>
                </div>
            </div>
            -->
            <div style="padding: 50px; text-align: center; opacity: 0.5;">
                <h3 class="soon-text" style="margin: 0; letter-spacing: 5px; text-transform: uppercase; font-size: 1.5rem; pointer-events: auto;">Soon...</h3>
            </div>
        </div>
        <div id="hobbies" class="content-section">
            <h1 style="font-size: 2.5rem; margin-bottom: 30px;">Hobbies</h1>
            <div class="game-card">
                <div class="game-title">Oxide: Survival Island</div>
                <div class="game-desc" id="oxide-desc">Hardcore survival game where I spend most of my time. Raid, build, dominate.</div>
                <a href="https://play.google.com/store/apps/details?id=com.catsbit.oxidesurvivalisland" target="_blank" rel="noopener noreferrer" class="download-btn" id="oxide-download">Download</a>
            </div>
        </div>
    </div>
    <div id="cursor">
        <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 2L28 16L16 18L10 28V2Z" stroke-width="1.5" stroke-linejoin="round"/>
        </svg>
    </div>
    <div class="menu-btn" id="menu-toggle"><span></span><span></span><span></span></div>
    <div class="sidebar" id="sidebar">
        <a href="#" class="link-btn" data-section="bio">My Bio</a>
        <a href="#" class="link-btn" data-section="projects">My Projects</a>
        <a href="#" class="link-btn" data-section="skills">My Skills</a>
        <a href="#" class="link-btn" data-section="hobbies">My Hobbies</a>
    </div>
    <div id="easter-egg-modal" class="modal">
        <img src="troll.gif" alt="Troll" draggable="false">
    </div>
    <div id="password-modal" class="modal">
        <div class="password-box">
            <h3 id="riddle-trigger" style="cursor: pointer;">U need 80+ IQ to solve this</h3>
            <input type="password" id="tg-password" placeholder="" autocomplete="off">
            <button id="submit-password">✔</button>
        </div>
    </div>
    <div id="riddle-modal" class="modal">
        <div class="password-box">
            <h3>RIDDLE</h3>
            <p style="margin: 0; color: rgba(255,255,255,0.7); font-size: 0.9rem; max-width: 300px; line-height: 1.5;">You enter a dark room. There is a candle, a kerosene lamp, and a fireplace. You have only one box of matches in your pocket. What will you light first?</p>
            <input type="text" id="riddle-answer" placeholder="Answer" autocomplete="off">
            <button id="submit-riddle">✔</button>
        </div>
    </div>
    <div id="success-modal" class="modal" style="z-index: 5002;">
        <div class="password-box">
            <h3 style="font-size: 1.5rem;">Password is <span style="color: #00d2ff;">Telegram</span></h3>
        </div>
    </div>
    <div id="nohello-modal" class="modal" style="z-index: 5003;">
        <div class="password-box" style="max-width: 400px;">
            <h3 id="nohello-title">Communication Etiquette</h3>
            <p id="nohello-text" style="color: var(--text-muted); margin-bottom: 15px;">Please read this before messaging:</p>
            <a id="nohello-link" href="https://nohello.net/en/" target="_blank" style="display: block; margin-bottom: 20px; color: var(--accent-primary); font-size: 1.2rem; text-decoration: underline; text-underline-offset: 4px;">nohello.net</a>
            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 20px; user-select: none;">
                <div style="position: relative; width: 20px; height: 20px;">
                    <input type="checkbox" id="nohello-checkbox" disabled style="width: 20px; height: 20px; cursor: pointer; accent-color: var(--accent-primary); opacity: 0.5; cursor: not-allowed;">
                    <div id="nohello-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10;"></div>
                </div>
                <label for="nohello-checkbox" id="nohello-label" style="color: var(--text-main); cursor: pointer;">I have read and understood</label>
            </div>
            <div id="nohello-warning" style="color: #ff4444; font-size: 0.9rem; margin-bottom: 15px; display: none; animation: fadeIn 0.3s;">First read "nohello.net"</div>
            <button id="nohello-submit" disabled style="opacity: 0.5; cursor: not-allowed;">Continue</button>
        </div>
    </div>

    <div id="oxide-id-modal" class="modal">
        <div class="info-box">
            <button class="modal-close-btn">&times;</button>
            <div class="info-id">W7-V29-NU</div>
            <div id="oxide-donate-text" style="font-size: 0.85rem; color: var(--text-muted); margin: -10px 0 5px 0;">Donate to me if you can please</div>
            <button id="copy-oxide-id" class="info-copy-btn">Copy</button>
        </div>
    </div>

    <div id="snake-modal" class="modal">
        <div class="game-box">
            <button class="modal-close-btn">&times;</button>
            <div style="display: flex; justify-content: space-between; align-items: center; color: var(--accent-primary); font-weight: bold; font-size: 1.2rem;">
                <span id="snake-score-display">Score: 0</span>
            </div>
            <canvas id="snake-canvas" width="300" height="300"></canvas>
            <button id="start-snake-btn" class="info-copy-btn">START</button>
        </div>
    </div>

    <div id="paint-modal" class="modal">
        <div class="paint-box">
            <button class="modal-close-btn">&times;</button>
            <div class="paint-controls">
                <input type="color" id="paint-color" value="#00d2ff" style="border: none; width: 40px; height: 40px; padding: 0; background: none; cursor: pointer;">
                <input type="range" id="paint-size" min="1" max="20" value="5" style="width: 100px;">
                <button id="paint-clear" class="info-copy-btn" style="padding: 8px 15px; font-size: 0.8rem;">Clear</button>
            </div>
            <canvas id="paint-canvas"></canvas>
        </div>
    </div>

    <div class="audio-player-toggle" id="audio-player-toggle">
        <svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
    </div>
    <div class="audio-player-container" id="audio-player-container">
        <div class="track-title" id="track-title">Loading...</div>
        <div class="progress-wrapper">
            <span class="time-display" id="current-time">0:00</span>
            <div class="progress-bar-container" id="progress-bar-container">
                <div class="progress-bar-fill" id="progress-bar-fill"></div>
            </div>
            <span class="time-display" id="total-duration">0:00</span>
        </div>
        <div class="audio-controls">
            <button id="prev-btn">
                <svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg>
            </button>
            <button id="play-pause-btn"></button>
            <button id="next-btn">
                <svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
            </button>
            <button id="loop-btn">
                <svg viewBox="0 0 24 24"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>
            </button>
            <div class="volume-control">
                <button id="volume-btn"></button>
                <div class="volume-popup" id="volume-popup">
                    <input type="range" class="volume-slider" id="volume-slider" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
    </div>
    <audio id="bg-music"></audio>

    <script>
        const cursor = document.getElementById('cursor');
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const pContainer = document.getElementById('particle-container');
        const starsContainer = document.getElementById('stars-container');
        const snowContainer = document.getElementById('snow-container');
        const snowChars = ['❄', '❅', '❆'];
        let mouseX = 0, mouseY = 0, cursorX = 0, cursorY = 0;
        let lastTouchTime = 0;
        
        const langBtn = document.getElementById('lang-btn');
        const langDropdown = document.getElementById('lang-dropdown');
        const themeBtn = document.getElementById('theme-btn');
        const themeDropdown = document.getElementById('theme-dropdown');
        
        const safeStorage = {
            getItem: (key) => { try { return localStorage.getItem(key); } catch(e) { return null; } },
            setItem: (key, val) => { try { localStorage.setItem(key, val); } catch(e) {} }
        };

        let currentLang = safeStorage.getItem('siteLang') || 'en';
        let phrases = ['Gamer', 'Dreamer'];
        const typeWriterElement = document.getElementById('typewriter');
        let phraseIndex = 0;
        let statusTimeout;
        let isGameOver = false;

        const translations = {
            en: {
                bioBtn: "My Bio", projectsBtn: "My Projects", skillsBtn: "My Skills", hobbiesBtn: "My Hobbies",
                worksTitle: "Works", skillsTitle: "Skills", hobbiesTitle: "Hobbies", soon: "Soon...",
                oxideDesc: "Hardcore survival game where I spend most of my time. Raid, build, dominate.", oxideDownload: "Download",
                telegram: "Telegram", youtube: "YouTube",
                riddleTrigger: "U need 80+ IQ to solve this",
                riddleTitle: "RIDDLE",
                riddleText: "You enter a dark room. There is a candle, a kerosene lamp, and a fireplace. You have only one box of matches in your pocket. What will you light first?",
                riddlePlaceholder: "Answer",
                passwordPrefix: "Password is ",
                typewriter: ['Gamer', 'Dreamer'],
                audioPrev: "Previous track", audioPlay: "Play / Pause", audioNext: "Next track",
                audioLoop: "Repeat track", audioVolume: "Volume",
                passwordPlaceholder: "Password",
                greetings: { morning: "Good morning", afternoon: "Good afternoon", evening: "Good evening", night: "Good night" },
                copied: "Copied to clipboard",
                oxideBtn: "Oxide HH-ID",
                oxideDonate: "Donate to me if you can please",
                copyBtn: "Copy",
                snakeBtn: "Snake Game",
                snakeStart: "START",
                snakeAgain: "Play Again",
                paintBtn: "Paint",
                paintClear: "Clear",
                noHelloTitle: "Communication Etiquette",
                noHelloText: "Please read this before messaging:",
                noHelloCheckbox: "I have read and understood",
                noHelloBtn: "Continue",
                noHelloWarning: "First read \"nohello.net\""
            },
            ru: {
                bioBtn: "Биография", projectsBtn: "Проекты", skillsBtn: "Навыки", hobbiesBtn: "Мои занятия",
                worksTitle: "Работы", skillsTitle: "Навыки", hobbiesTitle: "Занятия", soon: "Скоро...",
                oxideDesc: "Хардкорная игра на выживание, где я провожу большую часть времени. Рейди, строй, доминируй.", oxideDownload: "Скачать",
                telegram: "Телеграм", youtube: "Ютуб",
                riddleTrigger: "Нужен IQ 80+ чтобы решить",
                riddleTitle: "ЗАГАДКА",
                riddleText: "Вы входите в темную комнату. В ней есть свеча, керосиновая лампа и камин. У вас в кармане только один коробок спичек. Что вы зажжете первым?",
                riddlePlaceholder: "Ответ",
                passwordPrefix: "Пароль: ",
                typewriter: ['Геймер', 'Мечтатель'],
                audioPrev: "Предыдущий трек", audioPlay: "Воспроизвести / Пауза", audioNext: "Следующий трек",
                audioLoop: "Зациклить трек", audioVolume: "Громкость",
                passwordPlaceholder: "Пароль",
                greetings: { morning: "Доброе утро", afternoon: "Добрый день", evening: "Добрый вечер", night: "Доброй ночи" },
                copied: "Скопировано в буфер обмена",
                oxideBtn: "Oxide HH-ID",
                oxideDonate: "Задонать мне если можешь пожалуйста",
                copyBtn: "Копировать",
                snakeBtn: "Змейка",
                snakeStart: "СТАРТ",
                snakeAgain: "Играть снова",
                paintBtn: "Рисование",
                paintClear: "Очистить",
                noHelloTitle: "Культура общения",
                noHelloText: "Пожалуйста, прочтите это перед тем как писать:",
                noHelloCheckbox: "Я ознакомился и понял",
                noHelloBtn: "Продолжить",
                noHelloWarning: "Сначала прочитай \"nohello.net\""
            },
            es: {
                bioBtn: "Biografía", projectsBtn: "Proyectos", skillsBtn: "Habilidades", hobbiesBtn: "Mis Pasatiempos",
                worksTitle: "Trabajos", skillsTitle: "Habilidades", hobbiesTitle: "Pasatiempos", soon: "Pronto...",
                oxideDesc: "Juego de supervivencia hardcore donde paso la mayor parte de mi tiempo. Asalta, construye, domina.", oxideDownload: "Descargar",
                telegram: "Telegram", youtube: "YouTube",
                riddleTrigger: "Necesitas 80+ IQ para esto",
                riddleTitle: "ACERTIJO",
                riddleText: "Entras en una habitación oscura. Hay una vela, una lámpara de queroseno y una chimenea. Solo tienes una caja de cerillas en tu bolsillo. ¿Qué encenderás primero?",
                riddlePlaceholder: "Respuesta",
                passwordPrefix: "La contraseña es ",
                typewriter: ['Jugador', 'Soñador'],
                audioPrev: "Pista anterior", audioPlay: "Reproducir / Pausa", audioNext: "Pista siguiente",
                audioLoop: "Repetir pista", audioVolume: "Volumen",
                passwordPlaceholder: "Contraseña",
                greetings: { morning: "Buenos días", afternoon: "Buenas tardes", evening: "Buenas noches", night: "Buenas noches" },
                copied: "Copiado al portapapeles",
                oxideBtn: "Oxide HH-ID",
                oxideDonate: "Dóname si puedes por favor",
                copyBtn: "Copiar",
                snakeBtn: "Juego Snake",
                snakeStart: "EMPEZAR",
                snakeAgain: "Jugar de nuevo",
                paintBtn: "Pintar",
                paintClear: "Borrar",
                noHelloTitle: "Etiqueta de comunicación",
                noHelloText: "Por favor lea esto antes de enviar mensajes:",
                noHelloCheckbox: "He leído y entendido",
                noHelloBtn: "Continuar",
                noHelloWarning: "Primero lee \"nohello.net\""
            },
            fr: {
                bioBtn: "Biographie", projectsBtn: "Projets", skillsBtn: "Compétences", hobbiesBtn: "Mes Loisirs",
                worksTitle: "Travaux", skillsTitle: "Compétences", hobbiesTitle: "Loisirs", soon: "Bientôt...",
                oxideDesc: "Jeu de survie hardcore où je passe la plupart de mon temps. Raidez, construisez, dominez.", oxideDownload: "Télécharger",
                telegram: "Telegram", youtube: "YouTube",
                riddleTrigger: "Il faut 80+ de QI pour ça",
                riddleTitle: "ÉNIGME",
                riddleText: "Vous entrez dans une pièce sombre. Il y a une bougie, une lampe à pétrole et une cheminée. Vous n'avez qu'une boîte d'allumettes dans votre poche. Qu'allumez-vous en premier ?",
                riddlePlaceholder: "Réponse",
                passwordPrefix: "Le mot de passe est ",
                typewriter: ['Joueur', 'Rêveur'],
                audioPrev: "Piste précédente", audioPlay: "Lecture / Pause", audioNext: "Piste suivante",
                audioLoop: "Répéter la piste", audioVolume: "Volume",
                passwordPlaceholder: "Mot de passe",
                greetings: { morning: "Bonjour", afternoon: "Bon après-midi", evening: "Bonsoir", night: "Bonne nuit" },
                copied: "Copié dans le presse-papiers",
                oxideBtn: "Oxide HH-ID",
                oxideDonate: "Faites un don si vous le pouvez s'il vous plaît",
                copyBtn: "Copier",
                snakeBtn: "Jeu Snake",
                snakeStart: "DÉMARRER",
                snakeAgain: "Rejouer",
                paintBtn: "Peinture",
                paintClear: "Effacer",
                noHelloTitle: "Étiquette de communication",
                noHelloText: "Veuillez lire ceci avant d'envoyer un message :",
                noHelloCheckbox: "J'ai lu et compris",
                noHelloBtn: "Continuer",
                noHelloWarning: "Lisez d'abord \"nohello.net\""
            },
            de: {
                bioBtn: "Biografie", projectsBtn: "Projekte", skillsBtn: "Skills", hobbiesBtn: "Meine Hobbys",
                worksTitle: "Arbeiten", skillsTitle: "Fähigkeiten", hobbiesTitle: "Hobbys", soon: "Bald...",
                oxideDesc: "Hardcore-Survival-Spiel, in dem ich die meiste Zeit verbringe. Raiden, bauen, dominieren.", oxideDownload: "Herunterladen",
                telegram: "Telegram", youtube: "YouTube",
                riddleTrigger: "Du brauchst 80+ IQ dafür",
                riddleTitle: "RÄTSEL",
                riddleText: "Du betrittst einen dunklen Raum. Es gibt eine Kerze, eine Petroleumlampe und einen Kamin. Du hast nur eine Schachtel Streichhölzer in der Tasche. Was zündest du zuerst an?",
                riddlePlaceholder: "Antwort",
                passwordPrefix: "Passwort ist ",
                typewriter: ['Gamer', 'Träumer'],
                audioPrev: "Vorheriger Titel", audioPlay: "Wiedergabe / Pause", audioNext: "Nächster Titel",
                audioLoop: "Titel wiederholen", audioVolume: "Lautstärke",
                passwordPlaceholder: "Passwort",
                greetings: { morning: "Guten Morgen", afternoon: "Guten Tag", evening: "Guten Abend", night: "Gute Nacht" },
                copied: "In die Zwischenablage kopiert",
                oxideBtn: "Oxide HH-ID",
                oxideDonate: "Spende mir bitte, wenn du kannst",
                copyBtn: "Kopieren",
                snakeBtn: "Snake Spiel",
                snakeStart: "START",
                snakeAgain: "Nochmal spielen",
                paintBtn: "Malen",
                paintClear: "Löschen",
                noHelloTitle: "Kommunikationsetikette",
                noHelloText: "Bitte lesen Sie dies, bevor Sie eine Nachricht senden:",
                noHelloCheckbox: "Ich habe gelesen und verstanden",
                noHelloBtn: "Weiter",
                noHelloWarning: "Lies zuerst \"nohello.net\""
            }
        };

        function getGreetingTime() {
            const h = new Date().getHours();
            if (h < 6) return 'night';
            if (h < 12) return 'morning';
            if (h < 18) return 'afternoon';
            return 'evening';
        }

        function applyLanguage(lang) {
            const t = translations[lang];
            langBtn.textContent = lang.toUpperCase();
            
            document.querySelector('[data-section="bio"]').textContent = t.bioBtn;
            document.querySelector('[data-section="projects"]').textContent = t.projectsBtn;
            document.querySelector('[data-section="skills"]').textContent = t.skillsBtn;
            document.querySelector('[data-section="hobbies"]').textContent = t.hobbiesBtn;
            document.querySelector('#projects h1').textContent = t.worksTitle;
            document.querySelector('#skills h1').textContent = t.skillsTitle;
            document.querySelector('#hobbies h1').textContent = t.hobbiesTitle;
            document.getElementById('oxide-desc').textContent = t.oxideDesc;
            document.getElementById('oxide-download').textContent = t.oxideDownload;
            document.querySelectorAll('.soon-text').forEach(el => el.textContent = t.soon);
            document.getElementById('telegram-btn').textContent = t.telegram;
            // document.querySelector('a[href*="youtube"]').textContent = t.youtube;
            document.getElementById('riddle-trigger').textContent = t.riddleTrigger;
            document.querySelector('#riddle-modal h3').textContent = t.riddleTitle;
            document.querySelector('#riddle-modal p').textContent = t.riddleText;
            document.getElementById('riddle-answer').placeholder = t.riddlePlaceholder;
            document.querySelector('#success-modal h3').innerHTML = `${t.passwordPrefix}<span id="copy-password" style="color: var(--accent-primary); cursor: pointer; text-decoration: underline; text-underline-offset: 4px;" title="${t.copied}">Telegram</span>`;
            document.getElementById('tg-password').placeholder = t.passwordPlaceholder;
            document.getElementById('oxide-id-btn').textContent = t.oxideBtn;
            document.getElementById('oxide-donate-text').textContent = t.oxideDonate;
            document.getElementById('copy-oxide-id').textContent = t.copyBtn;
            document.getElementById('snake-game-btn').title = t.snakeBtn;
            document.getElementById('start-snake-btn').textContent = isGameOver ? t.snakeAgain : t.snakeStart;
            document.getElementById('paint-btn').title = t.paintBtn;
            document.getElementById('paint-clear').textContent = t.paintClear;
            document.getElementById('nohello-title').textContent = t.noHelloTitle;
            document.getElementById('nohello-text').textContent = t.noHelloText;
            document.getElementById('nohello-label').textContent = t.noHelloCheckbox;
            document.getElementById('nohello-submit').textContent = t.noHelloBtn;
            document.getElementById('nohello-link').href = `https://nohello.net/${lang}/`;
            document.getElementById('nohello-warning').textContent = t.noHelloWarning;
            
            document.getElementById('prev-btn').title = t.audioPrev;
            document.getElementById('play-pause-btn').title = t.audioPlay;
            document.getElementById('next-btn').title = t.audioNext;
            document.getElementById('loop-btn').title = t.audioLoop;
            document.getElementById('volume-btn').title = t.audioVolume;
            
            phrases = t.typewriter;
            
            document.getElementById('greeting').textContent = t.greetings[getGreetingTime()];
            phraseIndex = 0;
            
            startStatusAnimation();
            
            document.querySelectorAll('.lang-option').forEach(opt => {
                opt.classList.toggle('selected', opt.getAttribute('data-lang') === lang);
            });
        }

        function setLanguage(lang, animate = true) {
            currentLang = lang;
            safeStorage.setItem('siteLang', lang);
            document.documentElement.lang = lang;
            
            if (animate) {
                const overlay = document.getElementById('transition-overlay');
                overlay.classList.add('active');
                setTimeout(() => {
                    applyLanguage(lang);
                    setTimeout(() => overlay.classList.remove('active'), 300);
                }, 500);
            } else {
                applyLanguage(lang);
            }
        }
        
        langBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            langDropdown.classList.toggle('active');
        });
        
        document.querySelectorAll('.lang-option').forEach(opt => {
            opt.addEventListener('click', () => {
                setLanguage(opt.getAttribute('data-lang'), true);
                langDropdown.classList.remove('active');
            });
        });
        
        setLanguage(currentLang, false);

        let currentTheme = safeStorage.getItem('siteTheme') || 'default';
        function setTheme(theme) {
            currentTheme = theme;
            safeStorage.setItem('siteTheme', theme);
            document.body.className = theme === 'default' ? '' : `theme-${theme}`;
            
            document.querySelectorAll('.theme-option').forEach(opt => {
                opt.classList.toggle('selected', opt.getAttribute('data-theme') === theme);
            });
        }
        setTheme(currentTheme);

        themeBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            themeDropdown.classList.toggle('active');
        });
        document.querySelectorAll('.theme-option').forEach(opt => {
            opt.addEventListener('click', () => {
                setTheme(opt.getAttribute('data-theme'));
                themeDropdown.classList.remove('active');
            });
        });

        const speed = 0.9;

        document.addEventListener('mousemove', e => {
            mouseX = e.clientX; mouseY = e.clientY; cursor.style.opacity = '1';
            if (window.innerWidth > 768 && e.clientX < 20 && !sidebar.classList.contains('active')) {
                sidebar.classList.add('active');
                menuToggle.classList.add('active');
            }
        });
        document.addEventListener('mouseleave', () => { cursor.style.opacity = '0'; });

        function animateCursor() {
            cursorX += (mouseX - cursorX) * speed;
            cursorY += (mouseY - cursorY) * speed;
            cursor.style.transform = `translate3d(${cursorX - 7.5}px, ${cursorY - 1.5}px, 0)`;
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        const createClickSnow = (e) => {
            if (e.type === 'touchstart') lastTouchTime = Date.now();
            if (e.type === 'mousedown' && Date.now() - lastTouchTime < 500) return;

            if(!e.target.closest('a') && !e.target.closest('button') && !e.target.closest('input') && e.target.id !== 'menu-toggle' && 
               !e.target.closest('.menu-btn') && 
               !e.target.closest('.audio-player-container') && 
               !e.target.closest('.audio-player-toggle') && 
               !e.target.closest('.lang-dropdown') && !e.target.closest('#lang-btn') &&
               !e.target.closest('.theme-dropdown') && !e.target.closest('#theme-btn') &&
               !e.target.closest('.snake-btn') && 
               !e.target.closest('.paint-btn') &&
               !e.target.closest('.paint-box')) {
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;

                for(let i=0; i<4; i++) {
                    const p = document.createElement('div');
                    p.className = 'click-snow';
                    p.innerText = snowChars[Math.floor(Math.random() * snowChars.length)];
                    p.style.color = 'var(--particle-color)';
                    p.style.left = clientX + 'px';
                    p.style.top = clientY + 'px';
                    p.style.fontSize = Math.random() * 8 + 8 + 'px';
                    pContainer.appendChild(p);
                    const angle = (Math.random() * Math.PI) + Math.PI;
                    const force = Math.random() * 2 + 1;
                    let vx = Math.cos(angle) * force;
                    let vy = Math.sin(angle) * force;
                    let px = clientX, py = clientY;
                    let op = 1;
                    let grav = 0.05;
                    function moveP() {
                        vy += grav; px += vx; py += vy; op -= 0.015;
                        p.style.transform = `translate3d(${px - clientX}px, ${py - clientY}px, 0)`;
                        p.style.opacity = op;
                        if(op > 0) requestAnimationFrame(moveP); else p.remove();
                    }
                    moveP();
                }
            }
        };
        document.addEventListener('mousedown', createClickSnow);
        document.addEventListener('touchstart', createClickSnow, {passive: true});

        menuToggle.addEventListener('click', (e) => { e.stopPropagation(); menuToggle.classList.toggle('active'); sidebar.classList.toggle('active'); });
        document.addEventListener('click', (e) => {
            if (!sidebar.contains(e.target) && !menuToggle.contains(e.target) && sidebar.classList.contains('active')) {
                sidebar.classList.remove('active'); menuToggle.classList.remove('active');
            }
            const audioContainer = document.getElementById('audio-player-container');
            const audioToggle = document.getElementById('audio-player-toggle');
            const volumePopup = document.getElementById('volume-popup');
            const volumeBtn = document.getElementById('volume-btn');
            if (!langDropdown.contains(e.target) && !langBtn.contains(e.target)) langDropdown.classList.remove('active');
            if (!themeDropdown.contains(e.target) && !themeBtn.contains(e.target)) themeDropdown.classList.remove('active');
            if (!volumePopup.contains(e.target) && !volumeBtn.contains(e.target)) volumePopup.classList.remove('active');
            if (!audioContainer.contains(e.target) && !audioToggle.contains(e.target) && audioContainer.classList.contains('active')) {
                audioPlayerContainer.classList.remove('active');
            }
        });
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            sidebar.classList.remove('active'); menuToggle.classList.remove('active');
            
            const fills = document.querySelectorAll('.progress-fill');
            if (sectionId === 'skills') {
                setTimeout(() => { fills.forEach(f => f.style.width = f.getAttribute('data-width')); }, 100);
            } else {
                fills.forEach(f => f.style.width = '0');
            }
        }
        document.querySelectorAll('.sidebar .link-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = btn.getAttribute('data-section');
                if (sectionId) showSection(sectionId);
            });
        });

        const starFragment = document.createDocumentFragment();
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.style.position = 'absolute'; star.style.width = '1px'; star.style.height = '1px';
            star.style.background = 'var(--particle-color)'; star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%'; star.style.opacity = Math.random();
            star.style.animation = `starFade ${Math.random() * 3 + 2}s infinite alternate`;
            starFragment.appendChild(star);
        }
        starsContainer.appendChild(starFragment);

        function createSnow() {
            const snowflake = document.createElement('div');
            snowflake.className = 'snow';
            snowflake.innerText = snowChars[Math.floor(Math.random() * snowChars.length)];
            snowflake.style.color = 'var(--particle-color)';
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.fontSize = Math.random() * 10 + 10 + 'px';
            snowflake.style.opacity = Math.random() * 0.5 + 0.3;
            const duration = Math.random() * 5 + 10 + 's';
            snowflake.style.animation = `fall ${duration} linear forwards`;
            snowContainer.appendChild(snowflake);
            setTimeout(() => snowflake.remove(), parseFloat(duration) * 1000);
        }
        setInterval(createSnow, 400);

        let clickCount = 0;
        let clickTimer;
        const soonTrigger = document.getElementById('soon-trigger');
        const modal = document.getElementById('easter-egg-modal');
        const trollGif = modal.querySelector('img');

        soonTrigger.addEventListener('click', () => {
            clickCount++;
            if (clickCount === 1) clickTimer = setTimeout(() => clickCount = 0, 5000);
            if (clickCount >= 3) {
                clearTimeout(clickTimer); clickCount = 0;
                const baseSrc = trollGif.src.split('?')[0];
                trollGif.src = `${baseSrc}?t=${new Date().getTime()}`;
                modal.classList.add('active');
            }
        });
        modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('active'); });

        const tgModal = document.getElementById('password-modal');
        const tgPassInput = document.getElementById('tg-password');
        const tgSubmit = document.getElementById('submit-password');
        const tgBtn = document.getElementById('telegram-btn');
        const secretLink = "aHR0cHM6Ly90Lm1lL0l3ZWhlamo="; 

        tgBtn.addEventListener('click', (e) => {
            e.preventDefault();
            tgModal.classList.add('active');
            tgPassInput.value = '';
            tgPassInput.focus();
        });
        tgPassInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') tgSubmit.click();
        });
        tgSubmit.addEventListener('click', () => {
            if(tgPassInput.value.trim().toLowerCase() === 'telegram') {
                tgModal.classList.remove('active');
                noHelloModal.classList.add('active');
                noHelloCheckbox.checked = false;
                noHelloCheckbox.disabled = true;
                noHelloCheckbox.style.opacity = '0.5';
                noHelloCheckbox.style.cursor = 'not-allowed';
                noHelloOverlay.style.display = 'block';
                noHelloBtn.disabled = true;
                noHelloBtn.style.opacity = '0.5';
                noHelloBtn.style.cursor = 'not-allowed';
                noHelloWarning.style.display = 'none';
            } else {
                tgPassInput.style.borderColor = '#ff0055';
                tgPassInput.style.boxShadow = '0 0 15px #ff0055';
                setTimeout(() => { tgPassInput.style.borderColor = 'rgba(255,255,255,0.1)'; tgPassInput.style.boxShadow = 'none'; }, 500);
            }
        });
        tgModal.addEventListener('click', (e) => { if (e.target === tgModal) tgModal.classList.remove('active'); });

        const noHelloModal = document.getElementById('nohello-modal');
        const noHelloCheckbox = document.getElementById('nohello-checkbox');
        const noHelloOverlay = document.getElementById('nohello-overlay');
        const noHelloBtn = document.getElementById('nohello-submit');
        const noHelloLink = document.getElementById('nohello-link');
        const noHelloWarning = document.getElementById('nohello-warning');

        noHelloLink.addEventListener('click', () => {
            noHelloCheckbox.disabled = false;
            noHelloCheckbox.style.opacity = '1';
            noHelloCheckbox.style.cursor = 'pointer';
            noHelloOverlay.style.display = 'none';
            noHelloWarning.style.display = 'none';
        });

        noHelloOverlay.addEventListener('click', () => {
            noHelloWarning.style.display = 'block';
        });

        noHelloCheckbox.addEventListener('change', () => {
            noHelloBtn.disabled = !noHelloCheckbox.checked;
            noHelloBtn.style.opacity = noHelloCheckbox.checked ? '1' : '0.5';
            noHelloBtn.style.cursor = noHelloCheckbox.checked ? 'pointer' : 'not-allowed';
        });

        noHelloBtn.addEventListener('click', () => {
            if (!noHelloBtn.disabled) {
                window.open(atob(secretLink), '_blank');
                noHelloModal.classList.remove('active');
            }
        });
        noHelloModal.addEventListener('click', (e) => { if (e.target === noHelloModal) noHelloModal.classList.remove('active'); });

        let riddleClickCount = 0;
        let riddleTimer;
        const riddleTrigger = document.getElementById('riddle-trigger');
        const riddleModal = document.getElementById('riddle-modal');
        const riddleInput = document.getElementById('riddle-answer');
        const riddleSubmit = document.getElementById('submit-riddle');
        const successModal = document.getElementById('success-modal');

        riddleTrigger.addEventListener('click', () => {
            riddleClickCount++;
            if (riddleClickCount === 1) riddleTimer = setTimeout(() => riddleClickCount = 0, 5000);
            if (riddleClickCount >= 3) {
                clearTimeout(riddleTimer); riddleClickCount = 0;
                tgModal.classList.remove('active');
                riddleModal.classList.add('active');
                riddleInput.value = '';
            }
        });
        riddleInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') riddleSubmit.click(); });
        riddleSubmit.addEventListener('click', () => {
            const val = riddleInput.value.toLowerCase().trim();
            const validAnswers = ['match', 'a match', 'the match', 'спичку', 'спичка', 'cerilla', 'fosforo', 'allumette', 'streichholz'];
            if(validAnswers.includes(val)) {
                riddleModal.classList.remove('active');
                successModal.classList.add('active');
            }
            else {
                riddleInput.style.borderColor = '#ff0055'; riddleInput.style.boxShadow = '0 0 15px #ff0055';
                setTimeout(() => { riddleInput.style.borderColor = 'rgba(255,255,255,0.1)'; riddleInput.style.boxShadow = 'none'; }, 500);
            }
        });
        riddleModal.addEventListener('click', (e) => { if (e.target === riddleModal) riddleModal.classList.remove('active'); });
        successModal.addEventListener('click', (e) => { if (e.target === successModal) successModal.classList.remove('active'); });

        const oxideIdBtn = document.getElementById('oxide-id-btn');
        const oxideIdModal = document.getElementById('oxide-id-modal');
        const copyOxideIdBtn = document.getElementById('copy-oxide-id');
        const oxideIdCloseBtn = oxideIdModal.querySelector('.modal-close-btn');

        oxideIdBtn.addEventListener('click', (e) => {
            e.preventDefault();
            oxideIdModal.classList.add('active');
        });
        oxideIdModal.addEventListener('click', (e) => {
            if (e.target === oxideIdModal) {
                oxideIdModal.classList.remove('active');
            }
        });
        oxideIdCloseBtn.addEventListener('click', () => {
            oxideIdModal.classList.remove('active');
        });
        copyOxideIdBtn.addEventListener('click', () => {
            navigator.clipboard.writeText('W7-V29-NU').then(() => {
                const toast = document.getElementById('toast-notification');
                toast.textContent = translations[currentLang].copied;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        });

        document.addEventListener('click', (e) => {
            if (e.target && e.target.id === 'copy-password') {
                const textToCopy = e.target.textContent;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    const toast = document.getElementById('toast-notification');
                    toast.textContent = translations[currentLang].copied;
                    toast.classList.add('show');
                    setTimeout(() => {
                        toast.classList.remove('show');
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                });
            }
        });

        const snakeBtn = document.getElementById('snake-game-btn');
        const snakeModal = document.getElementById('snake-modal');
        const snakeCanvas = document.getElementById('snake-canvas');
        const startSnakeBtn = document.getElementById('start-snake-btn');
        const snakeScoreDisplay = document.getElementById('snake-score-display');
        const snakeCloseBtn = snakeModal.querySelector('.modal-close-btn');
        const ctx = snakeCanvas.getContext('2d');

        let snake = [{x: 10, y: 10}, {x: 9, y: 10}, {x: 8, y: 10}];
        let food = {x: 15, y: 10};
        let dx = 1;
        let dy = 0;
        let inputQueue = [];
        let snakeScore = 0;
        let isGameRunning = false;
        const gridSize = 15;
        const tileCount = 20;

        snakeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            snakeModal.classList.add('active');
        });
        snakeCloseBtn.addEventListener('click', () => {
            snakeModal.classList.remove('active');
            isGameRunning = false;
        });
        snakeModal.addEventListener('click', (e) => {
            if (e.target === snakeModal) {
                snakeModal.classList.remove('active');
                isGameRunning = false;
            }
        });

        startSnakeBtn.addEventListener('click', startGame);

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;
            
            if (type === 'eat') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, now);
                osc.frequency.exponentialRampToValueAtTime(1200, now + 0.1);
                gain.gain.setValueAtTime(0.05, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
                osc.start(now);
                osc.stop(now + 0.1);
            } else if (type === 'win') {
                const notes = [523.25, 659.25, 783.99, 1046.50, 783.99, 1046.50];
                const times = [0, 0.1, 0.2, 0.3, 0.4, 0.5];
                notes.forEach((freq, i) => {
                    const o = audioCtx.createOscillator();
                    const g = audioCtx.createGain();
                    o.connect(g);
                    g.connect(audioCtx.destination);
                    o.type = 'triangle';
                    o.frequency.value = freq;
                    g.gain.setValueAtTime(0.05, now + times[i]);
                    g.gain.exponentialRampToValueAtTime(0.001, now + times[i] + 0.2);
                    o.start(now + times[i]);
                    o.stop(now + times[i] + 0.2);
                });
            } else if (type === 'over') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.3);
                gain.gain.setValueAtTime(0.05, now);
                gain.gain.linearRampToValueAtTime(0.001, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            }
        }

        let lastTime = 0;
        function startGame() {
            if (isGameRunning) return;
            snake = [{x: 10, y: 10}, {x: 9, y: 10}, {x: 8, y: 10}];
            snakeScore = 0;
            dx = 1; dy = 0;
            inputQueue = [];
            isGameOver = false;
            startSnakeBtn.textContent = translations[currentLang].snakeStart;
            snakeScoreDisplay.textContent = `Score: ${snakeScore}`;
            isGameRunning = true;
            createFood();
            if (audioCtx.state === 'suspended') audioCtx.resume();
            lastTime = performance.now();
            window.requestAnimationFrame(gameLoop);
        }

        function gameLoop(currentTime) {
            if (!isGameRunning) return;
            window.requestAnimationFrame(gameLoop);
            
            if ((currentTime - lastTime) < 90) return;
            lastTime = currentTime;

            if (inputQueue.length > 0) {
                const nextMove = inputQueue.shift();
                dx = nextMove.dx;
                dy = nextMove.dy;
            }
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            
            snake.pop();

            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                gameOver();
                return;
            }
            for (let i = 0; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    gameOver();
                    return;
                }
            }

            snake.unshift(head);
            if (head.x === food.x && head.y === food.y) {
                snakeScore++;
                playSound('eat');
                snakeScoreDisplay.textContent = `Score: ${snakeScore}`;
                if (snakeScore === 21) {
                    playSound('win');
                    winGame();
                    return;
                }
                createFood();
            }
            
            drawGame();
        }

        function drawGame() {
            ctx.clearRect(0, 0, snakeCanvas.width, snakeCanvas.height);
            const snakeColor = getComputedStyle(document.body).getPropertyValue('--accent-primary').trim();
            const foodColor = getComputedStyle(document.body).getPropertyValue('--accent-secondary').trim();
            
            ctx.fillStyle = snakeColor;
            snake.forEach(part => {
                ctx.beginPath();
                ctx.arc(part.x * gridSize + gridSize / 2, part.y * gridSize + gridSize / 2, (gridSize - 2) / 2, 0, Math.PI * 2);
                ctx.fill();
            });

            ctx.fillStyle = foodColor;
            ctx.beginPath();
            ctx.arc(food.x * gridSize + gridSize / 2, food.y * gridSize + gridSize / 2, (gridSize - 2) / 2, 0, Math.PI * 2);
            ctx.fill();
        }

        function createFood() {
            let valid = false;
            while (!valid) {
                let spawnPadding = (Math.random() > 0.15) ? 1 : 0;
                let availableSize = tileCount - (spawnPadding * 2);
                food = {
                    x: Math.floor(Math.random() * availableSize) + spawnPadding,
                    y: Math.floor(Math.random() * availableSize) + spawnPadding
                };
                valid = true;
                for (let part of snake) {
                    if (part.x === food.x && part.y === food.y) {
                        valid = false;
                        break;
                    }
                }
            }
        }

        function gameOver() {
            playSound('over');
            isGameRunning = false;
            isGameOver = true;
            snakeScoreDisplay.textContent = `Game Over! Score: ${snakeScore}`;
            startSnakeBtn.textContent = translations[currentLang].snakeAgain;
        }

        function winGame() {
            isGameRunning = false;
            snakeModal.classList.remove('active');
            successModal.classList.add('active');
        }

        document.addEventListener('keydown', (e) => {
            if (!snakeModal.classList.contains('active')) return;
            
            if (isGameOver && e.code === 'Space') {
                e.preventDefault();
                e.stopImmediatePropagation();
                startGame();
                return;
            }

            if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)) e.preventDefault();
            
            const lastMove = inputQueue.length > 0 ? inputQueue[inputQueue.length - 1] : { dx: dx, dy: dy };
            
            if (e.key === 'ArrowUp' && lastMove.dy === 0) inputQueue.push({dx: 0, dy: -1});
            else if (e.key === 'ArrowDown' && lastMove.dy === 0) inputQueue.push({dx: 0, dy: 1});
            else if (e.key === 'ArrowLeft' && lastMove.dx === 0) inputQueue.push({dx: -1, dy: 0});
            else if (e.key === 'ArrowRight' && lastMove.dx === 0) inputQueue.push({dx: 1, dy: 0});
        });

        let touchStartX = 0;
        let touchStartY = 0;
        snakeCanvas.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }, {passive: false});
        snakeCanvas.addEventListener('touchmove', (e) => { e.preventDefault(); }, {passive: false});
        snakeCanvas.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            const diffX = touchEndX - touchStartX;
            const diffY = touchEndY - touchStartY;
            const threshold = 30;
            
            const lastMove = inputQueue.length > 0 ? inputQueue[inputQueue.length - 1] : { dx: dx, dy: dy };

            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > threshold) {
                if (diffX > 0 && lastMove.dx === 0) inputQueue.push({dx: 1, dy: 0});
                else if (diffX < 0 && lastMove.dx === 0) inputQueue.push({dx: -1, dy: 0});
            } else if (Math.abs(diffY) > Math.abs(diffX) && Math.abs(diffY) > threshold) {
                if (diffY > 0 && lastMove.dy === 0) inputQueue.push({dx: 0, dy: 1});
                else if (diffY < 0 && lastMove.dy === 0) inputQueue.push({dx: 0, dy: -1});
            }
        });

        // Paint Logic
        const paintBtn = document.getElementById('paint-btn');
        const paintModal = document.getElementById('paint-modal');
        const paintCanvas = document.getElementById('paint-canvas');
        const paintCtx = paintCanvas.getContext('2d');
        const paintColor = document.getElementById('paint-color');
        const paintSize = document.getElementById('paint-size');
        const paintClear = document.getElementById('paint-clear');
        const paintCloseBtn = paintModal.querySelector('.modal-close-btn');
        let isPainting = false;

        function resizePaintCanvas() {
            const maxWidth = Math.min(window.innerWidth * 0.9, 500);
            const maxHeight = Math.min(window.innerHeight * 0.6, 500);
            paintCanvas.width = maxWidth;
            paintCanvas.height = maxHeight;
            paintCtx.lineCap = 'round';
            paintCtx.lineJoin = 'round';
        }

        paintBtn.addEventListener('click', (e) => {
            e.preventDefault();
            snakeModal.classList.remove('active');
            oxideIdModal.classList.remove('active');
            paintModal.classList.add('active');
            resizePaintCanvas();
        });

        paintCloseBtn.addEventListener('click', () => paintModal.classList.remove('active'));
        paintModal.addEventListener('click', (e) => {
            if (e.target === paintModal) paintModal.classList.remove('active');
        });

        paintClear.addEventListener('click', () => {
            paintCtx.clearRect(0, 0, paintCanvas.width, paintCanvas.height);
        });

        function startPaint(e) {
            isPainting = true;
            draw(e);
        }
        function endPaint() {
            isPainting = false;
            paintCtx.beginPath();
        }
        function draw(e) {
            if (!isPainting) return;
            e.preventDefault();
            const rect = paintCanvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const x = (clientX - rect.left) * (paintCanvas.width / rect.width);
            const y = (clientY - rect.top) * (paintCanvas.height / rect.height);

            paintCtx.lineWidth = paintSize.value;
            paintCtx.strokeStyle = paintColor.value;

            paintCtx.lineTo(x, y);
            paintCtx.stroke();
            paintCtx.beginPath();
            paintCtx.moveTo(x, y);
        }

        paintCanvas.addEventListener('mousedown', startPaint);
        paintCanvas.addEventListener('mouseup', endPaint);
        paintCanvas.addEventListener('mousemove', draw);
        paintCanvas.addEventListener('touchstart', startPaint, {passive: false});
        paintCanvas.addEventListener('touchend', endPaint);
        paintCanvas.addEventListener('touchmove', draw, {passive: false});

        const audioPlayerToggle = document.getElementById('audio-player-toggle');
        const audioPlayerContainer = document.getElementById('audio-player-container');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const loopBtn = document.getElementById('loop-btn');
        const volumeBtn = document.getElementById('volume-btn');
        const volumePopup = document.getElementById('volume-popup');
        const volumeSlider = document.getElementById('volume-slider');
        const audio = document.getElementById('bg-music');
        const trackTitle = document.getElementById('track-title');
        const currentTimeEl = document.getElementById('current-time');
        const totalDurationEl = document.getElementById('total-duration');
        const progressBarContainer = document.getElementById('progress-bar-container');
        const progressBarFill = document.getElementById('progress-bar-fill');
        
        const tracks = [
            { src: 'background-music1.mp3', title: 'LO-FI #1' },
            { src: 'background-music2.mp3', title: 'LO-FI #2' },
            { src: 'background-music3.mp3', title: 'LO-FI #3' },
            { src: 'background-music4.mp3', title: 'LO-FI #4' },
            { src: 'background-music5.mp3', title: 'LO-FI #5' }
        ];
        let currentTrackIndex = 0;
        let isDraggingProgress = false;
        let autoPlayTimer;
        let bindsEnabled = false;

        const playIcon = `<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>`;
        const pauseIcon = `<svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>`;
        const volumeHighIcon = `<svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>`;
        const volumeLowIcon = `<svg viewBox="0 0 24 24"><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/></svg>`;
        const volumeMuteIcon = `<svg viewBox="0 0 24 24"><path d="M7 9v6h4l5 5V4L11 9H7z"/></svg>`;

        const savedTrackIndex = safeStorage.getItem('musicTrackIndex');
        const savedVolume = safeStorage.getItem('musicVolume');
        const isPlaylistLooping = safeStorage.getItem('musicPlaylistLoop') === 'true';

        if (savedTrackIndex !== null && tracks[savedTrackIndex]) {
            currentTrackIndex = parseInt(savedTrackIndex, 10);
        }
        if (savedVolume !== null) {
            audio.volume = savedVolume;
            volumeSlider.value = savedVolume;
        } else {
            audio.volume = 0.3;
            volumeSlider.value = 0.3;
        }
        if (isPlaylistLooping) {
            loopBtn.classList.add('active');
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const min = Math.floor(seconds / 60);
            const sec = Math.floor(seconds % 60);
            return `${min}:${sec < 10 ? '0' : ''}${sec}`;
        }

        function updateVolumeIcon(volume) {
            if (volume == 0) volumeBtn.innerHTML = volumeMuteIcon;
            else if (volume < 0.5) volumeBtn.innerHTML = volumeLowIcon;
            else volumeBtn.innerHTML = volumeHighIcon;
        }

        function loadTrack(index) {
            if (!tracks[index]) return;
            currentTrackIndex = index;
            trackTitle.textContent = tracks[index].title;
            audio.src = tracks[index].src;
            audio.load();
            safeStorage.setItem('musicTrackIndex', index);
        }

        function playNext(isAuto) {
            clearTimeout(autoPlayTimer);
            
            if (isAuto === true && loopBtn.classList.contains('active')) {
                audio.currentTime = 0;
                audio.play().catch(e => console.error("Audio play failed:", e));
                return;
            }

            let nextIndex = currentTrackIndex + 1;
            if (nextIndex >= tracks.length) {
                nextIndex = 0;
            }
            loadTrack(nextIndex);
            audio.play().catch(e => console.error("Audio play failed:", e));
        }
        function playPrev() {
            clearTimeout(autoPlayTimer);
            let prevIndex = currentTrackIndex - 1;
            if (prevIndex < 0) {
                prevIndex = tracks.length - 1;
            }
            loadTrack(prevIndex);
            audio.play().catch(e => console.error("Audio play failed:", e));
        }

        function updatePlayPauseIcon() {
            playPauseBtn.innerHTML = audio.paused ? playIcon : pauseIcon;
        }

        audioPlayerToggle.addEventListener('click', () => { audioPlayerContainer.classList.toggle('active'); });

        playPauseBtn.addEventListener('click', () => {
            bindsEnabled = true;
            if (audio.paused) { 
                audio.play().catch(e => console.error("Audio play failed:", e)); 
            } else { 
                audio.pause(); 
            }
        });

        nextBtn.addEventListener('click', () => playNext(false));
        prevBtn.addEventListener('click', playPrev);

        loopBtn.addEventListener('click', () => {
            const isLooping = loopBtn.classList.toggle('active');
            safeStorage.setItem('musicPlaylistLoop', String(isLooping));
        });

        volumeBtn.addEventListener('click', (e) => { e.stopPropagation(); volumePopup.classList.toggle('active'); });

        volumeSlider.addEventListener('input', e => { 
            audio.volume = e.target.value; 
            safeStorage.setItem('musicVolume', e.target.value);
            updateVolumeIcon(audio.volume);
        });

        function updateProgressFromEvent(e) {
            const rect = progressBarContainer.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            let pos = (clientX - rect.left) / rect.width;
            pos = Math.max(0, Math.min(1, pos));
            
            progressBarFill.style.width = `${pos * 100}%`;
            if (audio.duration) {
                const newTime = pos * audio.duration;
                audio.currentTime = newTime;
                currentTimeEl.textContent = formatTime(newTime);
            }
        }

        progressBarContainer.addEventListener('mousedown', (e) => {
            isDraggingProgress = true;
            updateProgressFromEvent(e);
        });

        progressBarContainer.addEventListener('touchstart', (e) => {
            isDraggingProgress = true;
            updateProgressFromEvent(e);
        }, { passive: false });

        const moveHandler = (e) => {
            if (isDraggingProgress) {
                e.preventDefault();
                updateProgressFromEvent(e);
            }
        };

        const upHandler = () => {
            isDraggingProgress = false; 
        };

        document.addEventListener('mousemove', moveHandler);
        document.addEventListener('touchmove', moveHandler, { passive: false });
        
        document.addEventListener('mouseup', upHandler);
        document.addEventListener('touchend', upHandler);

        audio.addEventListener('play', updatePlayPauseIcon);
        audio.addEventListener('pause', updatePlayPauseIcon);
        audio.addEventListener('ended', () => { autoPlayTimer = setTimeout(() => playNext(true), 1000); });
        audio.addEventListener('timeupdate', () => {
            if (audio.duration && !isDraggingProgress) {
                currentTimeEl.textContent = formatTime(audio.currentTime);
                progressBarFill.style.width = `${(audio.currentTime / audio.duration) * 100}%`;
            }
        });
        audio.addEventListener('loadedmetadata', () => {
            totalDurationEl.textContent = formatTime(audio.duration);
        });

        loadTrack(currentTrackIndex);
        updatePlayPauseIcon();
        updateVolumeIcon(audio.volume);

        document.addEventListener('keydown', (e) => {
            if (!bindsEnabled) return;
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

            if (e.code === 'Space') {
                if (e.repeat) return;
                e.preventDefault();
                playPauseBtn.click();
            } else if (e.ctrlKey) {
                if (e.code === 'ArrowRight') {
                    if (e.repeat) return;
                    e.preventDefault();
                    playNext(false);
                } else if (e.code === 'ArrowLeft') {
                    if (e.repeat) return;
                    e.preventDefault();
                    playPrev();
                } else if (e.code === 'ArrowUp') {
                    e.preventDefault();
                    let newVol = Math.min(1, audio.volume + 0.05);
                    audio.volume = newVol;
                    volumeSlider.value = newVol;
                    safeStorage.setItem('musicVolume', newVol);
                    updateVolumeIcon(newVol);
                } else if (e.code === 'ArrowDown') {
                    e.preventDefault();
                    let newVol = Math.max(0, audio.volume - 0.05);
                    audio.volume = newVol;
                    volumeSlider.value = newVol;
                    safeStorage.setItem('musicVolume', newVol);
                    updateVolumeIcon(newVol);
                }
            }
        });

        function changeStatusText() {
            typeWriterElement.style.opacity = '0';
            statusTimeout = setTimeout(() => {
                phraseIndex = (phraseIndex + 1) % phrases.length;
                typeWriterElement.textContent = phrases[phraseIndex];
                typeWriterElement.style.opacity = '1';
                statusTimeout = setTimeout(changeStatusText, 3000);
            }, 600);
        }

        function startStatusAnimation() {
            clearTimeout(statusTimeout);
            typeWriterElement.style.opacity = '0';
            statusTimeout = setTimeout(() => {
                typeWriterElement.textContent = phrases[phraseIndex];
                typeWriterElement.style.opacity = '1';
                statusTimeout = setTimeout(changeStatusText, 3000);
            }, 600);
        }
        startStatusAnimation();
    </script>
</body>
</html>
